penny_lafrafop_assignment:
    type: assignment
    debug: false
    actions:
        on assignment:
        - trigger name:click state:true
        - trigger name:chat state:true
        - trigger name:proximity state:true radius:2
    interact scripts:
    - penny_lafrafop_interact

    default constants:
        appearance1: "<npc.name>'lives in the wild but seems mysterious."
        appearance2: "He has an odd stare that seems to look past you and he mumbles gibberish once and awhile."
        appearance3: "You sense that <npc.name> has been out on this island far too long and it is affecting his mental and social abilities."
        appearance4: "You feel as though <npc.name> is much more important than his lowly appearance."
        appearance5: "Even though <npc.name> has been malnourished and sometimes speaks nonsense, you realize he was once a great man, which comes through in his keen eyes, and occassional educated speech."



penny_lafrafop_interact:
    type: interact
    steps:
        1:
            click trigger:
                script:
                
                    
                - wait 3s
                - look  <npc>  <player.eye_location>
                - wait 1s
                - inject description_inject_task
                - if <player.flag[npc.<npc>.familiarity.level]||0> <= 1:
                    - if <player.item_in_hand.script.name> == ring_of_promises:
                        - narrate "How did you come across my ring?!"
                        - stop
                    - random:
                        - repeat 1:
                            - narrate  "Oh hey there traveler."
                            - wait 3s
                            - narrate "I dropped my ring in the harbor"
                        - repeat 1:
                            - narrate  "Are you just passing through?"
                            - wait 3s
                            - narrate "People are always dropping things in the harbor, including me this time woefully."
                    - flag <player> penny_ring_of_promises
                    
                    
                - else:
                    - if <player.item_in_hand.script.name> == ring_of_promises:
                        - narrate "Oh hey there trav. .."
                        - narrate "You found my ring!"
                        - adjust <npc> velocity:0,0.5,0
                        - wait 1s
                        - adjust <npc> velocity:0,0.5,0
                        
                        - stop
                    - random:
                        - repeat 1:
                            - narrate "I'm not the greatest swimmer in the realm."
                            - wait 2s
                            - narrate "That harbor has always scared me."
                        - repeat 1:
                            - narrate "I don't think even a fisherman can fish out my special ring."
                            - wait 2s
                            - narrate "It looks so deep."

                  

                - wait 1s
                - look  <npc>  ring_of_promises_lost_spawnpoint
                    # - narrate format:npcchat "Headed out to explore the <&2>Song Tide<&a> archipelago?"
                    # - clickable penny_lafrafop_help_1_task save:penny_lafrafop_help_1_task_clickable
                    # - clickable penny_lafrafop_help_2_task save:penny_lafrafop_help_2_task_clickable
                    # - narrate  "<element[<&hover[Click to find out more from <npc.name>.]><&8><&lb><&color[#00cb43]><&sp><&sp><&E>1. <&B>Yes I am. Where am I?<&8><&rb><&end_hover>].on_click[<entry[penny_lafrafop_help_1_task_clickable].command>]>"
                    # - narrate  "<element[<&hover[Click to find out more from <npc.name>.]><&8><&lb><&color[#00cb43]><&sp><&sp><&E>2. <&B>What is the Song Tide archipelago?<&8><&rb><&end_hover>].on_click[<entry[penny_lafrafop_help_2_task_clickable].command>]>"
                    # - narrate  "<&E>3. <&B>No, I am not."
                    # - narrate  "<&E>4. <&B>Goodbye"
                    
                    # - zap 2
                # - else:
                    #     - narrate "Oh hello again <player.name>" 
#         2:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. /Yes/, where am I?
#                     script:
#                     - inject penny_lafrafop_help_1_task
                    
#                 2:
#                     trigger: <&7>/2/. /What/ is the /Song Tide/ /archipelago/?
#                     script:
#                     script:
#                     - inject penny_lafrafop_help_2_task
#                     # 
#                     # - narrate format:npcchat "I trust you will be well."
#                     # 
#                     # - zap 1
#         3:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. Tell me more about this place.
#                     script:
                    
#                     - inject description_inject_task
#                     - if <player.flag[npc.<npc.name>.familiarity.level]||0> > 1:
#                         - give xp quantity:10
#                         - narrate "<&8>[You have received 20 XP.]"
#                     - narrate format:npcchat "This is one of the ancient realms,"
#                     - narrate format:npcchat "a land of bards and mages;"
#                     - narrate format:npcchat "but dark times have fallen on our world of <&2>Deluvia<&a>."
                    
                    
#                     - narrate  "<&E>1. <&B>What are the dark times?"
#                     - narrate  "<&E>2. <&B>Where are the bards and mages?"
#                     - narrate  "<&E>3. <&B>Why is it ancient?"
#                     - narrate  "<&E>4. <&B>Goodbye"
#                     - zap 4
                    
#                 2:
#                     trigger: <&7>/2/. /Goodbye/
#                     script:
                    
#                     - narrate format:npcchat "May adventure find you."
#                     - if <util.random.int[1].to[15]> == 10:
#                         - narrate format:npcchat "and remember. . . A storm is coming."
                    
#                     - zap 1
#         4:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. What are the /dark times/?
#                     script:
                    
#                     - narrate format:npcchat "Dark times have befallen the whole of <&2>Deluvia<&a>. We are in Fortune's favor here in the <&2>Song Tide<&a>,"
#                     - narrate format:npcchat "but that might not last."
#                     - narrate format:npcchat "Our strong magic protects us from far off empires that wish us ill,"
#                     - narrate format:npcchat "and the plagues and disasters from the gods."
#                     - narrate format:npcchat "What we need now is a hero to ward off these dangers."
#                     - narrate format:npcchat "but the magic seems to be waning and evil growing."
#                     - narrate format:npcchat "Deluvia is being poisoned and she seeks to restore balance."
#                     - flag player penny_lafrafop_darktimes
#                     - wait 2s
#                     - narrate  "<&E>1. <&B>Tell me more about Deluvia being out of balance."
#                     - narrate  "<&E>2. <&B>Goodbye"
#                     - zap 10
                    
#                 2:
#                     trigger: <&7>/2/. Where are the /bards/ and /mages/?
#                     scropt:
                    
#                     - narrate format:npcchat "You will find many mages and bards throughout Deluvia, but the <&2>Song Tide<&a> is especially rich with these practioners."
#                     - narrate format:npcchat "The city of <&2>Rothigport<&a>, up the path, has some, and many more reside in the hills and forests on these islands."
#                     - narrate format:npcchat "If you want to learn from them, search one out, but do not trust everyone."
#                     - flag player penny_lafrafop_bardsmages
#                     - wait 2s
#                     - narrate  "<&E>1. <&B>How do I find out more?"
#                     - narrate  "<&E>2. <&B>Goodbye"
#                     - zap 5
                    
#                 3:
#                     trigger: <&7>/3/. Why is it ancient?
#                     script:
                    
#                     - narrate format:npcchat "Seek out a chronicler to know the best facts, but I have heard this is one of the original lands and the mortals were created right here on this island."
#                     - narrate format:npcchat "The goddess, <gold>Finnwyl<&a>, still resides here somewhere, though her powers have been greatly reduced after the Great War with the Gods.
#                     - flag player penny_lafrafop_ancient
#                     - wait 2s
#                     - narrate  "<&E>1. <&B>How do I find out more?"
#                     - narrate  "<&E>2. <&B>Goodbye"
#                     - zap 5
                    
#                 4:
#                     trigger: <&7>/4/. /Goodbye/
#                     script:
                    
#                     - narrate format:npcchat "It was good talking to you."
                    
#                     - zap 1
#         5:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. How do I find out more?
#                     script:
                    
#                     - narrate format:npcchat "Find other mortals about this world and talk to them. Some might be willing to talk to you."
#                     - narrate format:npcchat "Others are shy. Some can't be trusted."
#                     - narrate format:npcchat "And you can always start by killing some monsters."
#                     - zap 1
                    
#                 2:
#                     trigger: <&7>/2/. Goodbye
#                     script:
                    
#                     - narrate format:npcchat "May the gods be with you."
                    
#                     - zap 1
#         6:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. Why, /yes/ I am.
#                     script:
#                     - if <player.flag[penny_lafrafop_count]> <= 1:
#                         - execute as_server "mmocore admin exp give <player.name> main 10"
#                         - narrate "<&8>[You have received 10 XP.]"
                    
#                     - narrate format:npcchat "Excellent, excellent."
#                     - narrate format:npcchat "Are you in search of magic, weaponry or commerce?"
#                     - wait 2s
#                     - narrate  "<&E>1. <&B>Magic"
#                     - narrate  "<&E>2. <&B>Weaponry"
#                     - narrate  "<&E>3. <&B>Commerce."
#                     - narrate  "<&E>4. <&B>None of these."
#                     - narrate  "<&E>5. <&B>Goodbye"
#                     - zap 7
                    
#                 # 2:
#                 #     trigger: <&7>/2/. /What/ is the /Song Tide/ /archipelago/?
#                 #     script:
#                 #     - if <player.flag[penny_lafrafop_count]> <= 1:
#                 #         - execute as_server "mmocore admin exp give <player.name> main 10"
#                 #         - narrate "<&8>[You have received 10 XP.]"
#                 #     
#                 #     - narrate format:npcchat "You are in a grouping of large islands. This one we are on now is called <&2>Noctisbard<&a>."
#                 #     - narrate format:npcchat "It is an ancient land, once the domain of the gods. but now the god's decendents, us mortals, primarily reside here."
#                 #     - narrate format:npcchat "We are an enclave of wizards, bards, clerics and really anything that the <&2>Central Kingdoms<&a> now despise."
#                 #     - wait 2s
#                 #     - narrate  "<&E>1. <&B>What is the Central Kingdoms?"
#                 #     - narrate  "<&E>2. <&B>Where are the gods?"
#                 #     - narrate  "<&E>3. <&B>Why is it called Song Tide?"
#                 #     - narrate  "<&E>4. <&B>Goodbye"
#                 #     - zap 8
#                 #     
#                 3:
#                     trigger: <&7>/3/. /No/ I am not
#                     script:
#                     - if <player.flag[penny_lafrafop_count]> <= 1:
#                         - execute as_server "mmocore admin exp give <player.name> main 10"
#                         - narrate "<&8>[You have received 10 XP.]"
                    
#                     - narrate format:npcchat "Well you can head back to <&2>Rothigport<&a>, the city to the north."
#                     - narrate format:npcchat "or head out into <&2>The Wild<&a> to form your own town and maybe an empire."
#                     - wait 2s
#                     - narrate  "<&E>1. <&B>What is in Rothigport?"
#                     - narrate  "<&E>2. <&B>What is The Wild?"
#                     - narrate  "<&E>3. <&B>How do I start a town?"
#                     - narrate  "<&E>4. <&B>Goodbye"
#                     - zap 9
                    
#                 4:
#                     trigger: <&7>/4/. /Goodbye/
#                     script:
                    
#                     - narrate format:npcchat "See you later."
                    
#                     - zap 1
#             click trigger:
#                 script:
#                 - zap 1
#         7:
#             chat trigger:
#                 1:
#                     trigger: <&7>/1/. /Magic/
#                     script:
                    
#                     - narrate format:npcchat "You can start down the path of magic by talking to another mortal like myself, but one that knows magic."
#                     - narrate format:npcchat "They can teach you some starting spells."
#                     - zap 1
                    
#                 2:
#                     trigger: <&7>/2/. /Weaponry/
#                     script:
                    
#                     - narrate format:npcchat "You can start down the path of a warrior by talking to another mortal like myself, but one that knows fighting."
#                     - narrate format:npcchat "They can teach you some starting skills."
#                     - zap 1
                    
#                 3:
#                     trigger: <&7>/3/. /Commerce/
#                     script:
                    
#                     - narrate format:npcchat "You can start by either starting a town, where other mortals can come to you and buy items,"
#                     - narrate format:npcchat "or rent a shop in one of the towns where others come by and sell your wares there."
#                     - narrate format:npcchat "Of course you need to get some things to sell, by killing monsters, mining for ores, and finding items by exploring the land."
#                     - zap 1
                    
#                 4:
#                     trigger: <&7>/4/. /None/ of these.
#                     script:
                    
#                     - narrate format:npcchat "There are many more professions and preoccupations. Talk to more people around to find more. <&2>Rothigport<&a> is a good place to start."
#                     - narrate format:npcchat "You can also start by killing some weaker monsters and get their treasure."
#                     - narrate format:npcchat "Starting your own town is always a good option as well."
#                     - zap 1
                    
#         8:
#                 chat trigger:
#                 1:
#                         trigger: <&7>/1/. What is the /Central Kingdoms/?
#                         script:
                        
#                         - narrate format:npcchat "They are the old capital of Deluvia of <&2>Pallamost<&a>, and the new empire of <&2>Druvenrog<&a> far to the east."
#                         - narrate format:npcchat "Most all of us are trying to stay out of Druvenrog's path of dominance by staying way out here."
#                         - narrate format:npcchat "Of course you are always welcome to go there and visit but get more advice from an expert before doing so."
#                         - zap 1
                        
#                 2:
#                         trigger: <&7>/2/. Where are the /gods/?
#                         script:
                        
#                         - narrate format:npcchat "The gods, were once very powerful, but many out here still worship them."
#                         - narrate format:npcchat "After the Great War of the Third Age, most of the gods were defeated and they now exist in the <&2>Aether<&a>."
#                         - narrate format:npcchat "But some that allied with the mortals, still remain."
#                         - narrate format:npcchat "Find a <gold>cleric<&a> in <&2>Rothigport<&a>, or out in the countryside to learn more about following one of the gods and gaining their power"
#                         - zap 1
                        
#                 3:
#                         trigger: <&7>/3/. Why is it called /Song Tide/?
#                         script:
                        
#                         - narrate format:npcchat "I believe the first <gold>Goddess of the Four Winds<&a> resides out there on the sea."
#                         - narrate format:npcchat "and with her power, came the spells for the wind mages,"
#                         - narrate format:npcchat "and even more so, the songs that the bards sing, which are too, very powerful."
#                         - narrate format:npcchat "Mostly though, the winds that howl through the straights and channels create a beautiful song."
#                         - zap 1
                        
#                 4:
#                         trigger: <&7>/4/. /Goodbye/
#                         script:
                        
#                         - narrate format:npcchat "Do save us <player.name>."
#                         - zap 1
                        
#         9:
#                 chat trigger:
#                 1:
#                         trigger: <&7>/1/. What is  /Rothigport/?
#                         script:
                        
#                         - narrate format:npcchat "<&2>Rothigport<&a>, is the largest city in the Song Tide."
#                         - narrate format:npcchat "Most of the commerce in this area takes place there, among fishermen and boat builders."
#                         - narrate format:npcchat "but you will also find a villain or two, so be careful."
#                         - narrate format:npcchat "Simply head north down the path to find it."
#                         - narrate format:npcchat "but know this traveler, Rothigport, for being a city of magic, has gained too much power and is part of the reason Deluvia seeking to balance this power."
#                         - narrate format:npcchat "Look for entrances to new menacing creatures' lairs that are seeking to bring the mortals into check. One is east of Rothigport and the other is west."
#                         - zap 1
                        
#                 2:
#                         trigger: <&7>/2/. What is The /Wild/?
#                         script:
                        
#                         - narrate format:npcchat "Some call it <&2>The Outer Rim<&a>, some call it <&2>The Wild<&a>, and others, <&2>The Outlands<&a>"
#                         - narrate format:npcchat "but it is simply the lands outside the reach of <&2>the Central Kingdoms<&a>."
#                         - narrate format:npcchat "where a mortal can still claim their own land."
#                         - narrate format:npcchat "You can find passage out there on a ship in <&2>Rothigport<&a>, or other ships on the islands out here."
#                         - zap 1
                        
#                 3:
#                         trigger: <&7>/3/. How do I start a /town/?
#                         script:
                        
#                         - narrate format:npcchat "Many travelers that escaped the Central Kingdoms are starting towns out in The Outlands."
#                         - narrate format:npcchat "Simply travel out there and find the best plot of land you can."
#                         - narrate format:npcchat "Ally with others to build a stronger force. These new cities that you travelers develop will save us from the evils that are coming."
#                         - narrate format:npcchat "Once you find a good spot out there then do <white>( /claim} )<&r>"
#                         - zap 1
                        
#                 4:
#                         trigger: <&7>/4/. /Goodbye/
#                         script:
                        
#                         - narrate format:npcchat "Do save us <player.name>."
#                         - zap 1
                        
#         10:
#                 chat trigger:
#                 1:
#                         trigger: <&7>/1/. Tell me more about Deluvia being out of /balance/?
#                         script:
                        
#                         - narrate format:npcchat "Deluvia seeks balance of all things."
#                         - narrate format:npcchat "The Elements of its ley lines and the great Virtues passed down from the Sages."
#                         - narrate format:npcchat "but the mortals have thrown things out of whack by disregarding the Gods, and the Virtues"
#                         - narrate format:npcchat "and new creatures have emerged to try to bring the mortals back to their original state."
#                         - narrate format:npcchat "A new hero such as yourself can find the entrances to these areas where these abominations exist. "
#                         - narrate format:npcchat "or maybe us mortals are the abomination to Deluvia; sometimes I wonder."
#                         - zap 1
                        
#                 2:
#                         trigger: <&7>/4/. /Goodbye/
#                         script:
                        
#                         - narrate format:npcchat "Do save us <player.name>."
#                         - zap 1
                    
            
            

# penny_lafrafop_help_1_task:
#     type: task
#     script:
    
#     - inject description_inject_task
#     - narrate format:npcchat "You are in the <&2>Song Tide <&a>archipelago on the island of <&2>Noctisbard<&a>."
#     - narrate format:npcchat "and I am <gold>penny_lafrafop<&a>, an old wanderer who is passing through."
#     - wait 2s
#     - narrate  "<&E>1. <&B>Tell me more about this place."
#     - narrate  "<&E>2. <&B>Goodbye"
    
#     - zap 3


# penny_lafrafop_help_2_task:
#     type: task
#     script:
#     - if <player.flag[npc.<npc.name>.familiarity.level]||0> <= 1:
#         - give xp quantity:10
#         - narrate "<&8>[You have received 10 XP.]"
    
#     - inject description_inject_task
#     - narrate format:npcchat "You are in a grouping of large islands. This one we are on now is called <&2>Noctisbard<&a>."
#     - narrate format:npcchat "It is an ancient land, once the domain of the gods. but now the god's decendents, us mortals, primarily reside here."
#     - narrate format:npcchat "We are an enclave of wizards, bards, clerics and really anything that the <&2>Central Kingdoms<&a> now despise."
#     - wait 2s
#     - narrate  "<&E>1. <&B>What is the Central Kingdoms?"
#     - narrate  "<&E>2. <&B>Where are the gods?"
#     - narrate  "<&E>3. <&B>Why is it called Song Tide?"
#     - narrate  "<&E>4. <&B>Goodbye"
#     - zap 8
    