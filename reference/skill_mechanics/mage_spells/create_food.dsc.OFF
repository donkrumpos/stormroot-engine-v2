create_food_task:
    type: task
    script:
    - if <player.has_flag[skill.spells.create_food.level].not>:
        - flag <player> skill.spells.create_food.level:1
    - define level <player.flag[skill.spells.create_food.level]>
    - define food <script[food_list].data_key[foods].keys.random>
    - define quantity 1
    - define random_number <script[food_list].data_key[foods.<[food]>].sub[<[level]>].max[1]>
    - if  <script[food_list].data_key[foods.<[food]>]> == 1 && <[level]> >= 3:
        - define quantity: <util.random.int[1].to[<[level]>]>
    - if <util.random.int[1].to[<[random_number]>]> != 1:
        - narrate "Failed to create food."
        - stop
    - if <player.inventory.empty_slots.not>:
        - drop <[food]>
    - else:
        - give <[food]> quantity:<[quantity]> slot:<player.inventory.find_empty_slots.random>
    - narrate "Creating <[food].replace[_].with[<&sp>]>"
    - if <util.random.int[<[level].min[100]>].to[100]> == 100:
        - feed <player>
    # - define food <script[food_list].data_key[foods].keys.random>
    # - narrate <[food]>


food_list:
    type: data
    foods:
      apple: 1
      baked_potato: 1
      beetroot: 1
      beetroot_soup: 2
      bread: 1
      carrot: 1
      chorus_fruit: 40
      cooked_chicken: 1
      cooked_cod: 5
      cooked_mutton: 1
      cooked_porkchop: 1
      cooked_rabbit: 1
      cooked_salmon: 1
      cookie: 1
      dried_kelp: 1
      enchanted_golden_apple: 100
      glow_berries: 20
      golden_apple: 80
      golden_carrot: 70
      honey_bottle: 30
      melon_slice: 1
      mushroom_stew: 1
      potato: 1
      pumpkin_pie: 1
      rabbit_stew: 1
      beef: 1
      chicken: 1
      cod: 1
      mutton: 1
      porkchop: 1
      rabbit_foot: 2
      salmon: 1
      cooked_beef: 1
      suspicious_stew: 6
      sweet_berries: 2
      tropical_fish: 1
    sats:
      apple: 2.4
      baked_potato: 6
      beetroot: 1.2
      beetroot_soup: 7.2
      bread: 6
      carrot: 3.6
      chorus_fruit: 2.4
      cooked_chicken: 7.2
      cooked_cod: 6
      cooked_mutton: 9.6
      cooked_porkchop: 12.8
      cooked_rabbit: 6
      cooked_salmon: 9.6
      cookie: 0.4
      dried_kelp: 0.6
      enchanted_golden_apple: 9.6
      glow_berries: 0.4
      golden_apple: 9.6
      golden_carrot: 14.4
      honey_bottle: 1.2
      melon_slice: 1.2
      mushroom_stew: 7.2
      potato: 0.6
      pumpkin_pie: 4.8
      rabbit_stew: 12
      raw_beef: 1.8
      chicken: 1.2
      cod: 0.4
      mutton: 1.2
      porkchop: 1.8
      rabbit_foot: 1.8
      salmon: 0.4
      cooked_beef: 12.8
      suspicious_stew: 7.2
      sweet_berries: 0.4
      tropical_fish: 0.2